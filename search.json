[{"path":"https://qile0317.github.io/scballpack/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 Qile Yang Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://qile0317.github.io/scballpack/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Qile Yang. Maintainer, author, copyright holder.","code":""},{"path":"https://qile0317.github.io/scballpack/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Yang, Qile. 2023. APackOfTheClones: Visualize T cell clonal expansion via circle packing.  URL https://github.com/Qile0317/APackOfTheClones","code":"@Manual{,   title = {APackOfTheClones: Visualize T cell clonal expansion via circle packing},   author = {Qile Yang},   year = {2023},   url = {https://github.com/Qile0317/APackOfTheClones}, }"},{"path":"https://qile0317.github.io/scballpack/index.html","id":"apackoftheclones-","dir":"","previous_headings":"","what":"Visualization Of T-cell Clonal Expansion","title":"Visualization Of T-cell Clonal Expansion","text":"APackOfTheClones R package produce “ball-packing” visualizations clonal expansion T-cells seurat(V4) object, based T-cell-receptor (TCR) library generated cellranger output 10X single-cell immune profiling. concept first implemented study Ma et al.[1] Murray Christian Ben Murrell (@Murrellb) nasal polyp TH cells. APackOfTheClones counts clonotype frequencies seurat/umap cluster produces circle packing frequencies intuitively represent clonal expansion. packing cluster plotted roughly coordinates original UMAP reduction color. example APackOfTheClones used public 10X genomics dataset:","code":""},{"path":"https://qile0317.github.io/scballpack/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Visualization Of T-cell Clonal Expansion","text":"complete versions package projected registered CRAN Bioconductor.","code":"library(devtools) devtools::install_github(\"Qile0317/APackOfTheClones\")"},{"path":"https://qile0317.github.io/scballpack/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Visualization Of T-cell Clonal Expansion","text":"main ball packing function clonal_expansion_plot package takes two main arguments: - Seurat object UMAP reduction - TCR library dataframe, all_contig_annotations.csv generated Cell Ranger integrates TCR library seurat object metadata(creates new temporary seurat object). produce ggplot clusters circles roughly UMAP coordinates, circle size represents clone size. example shown . Run ?clonal_expansion_plot details customization resulting plot optional arguments, error handling. also highly recommended save plot svg use publications. addition, integrate_tcr can just integrate TCR V(D)J library seurat object metadata analyses: function also takes care multiple rows data cell barcode. Run ?integrate_tcr details.","code":"library(Seurat) library(readr) library(APackOfTheClones)  # run sc-RNAseq pipeline to produce a seurat_object  seurat_object <- RunUMAP(seurat_object) TCR_dataframe <- read.csv(\"file_location/all_contig_annotations.csv\")  # produce the ball-packing plot ball_pack_plot <- clonal_expansion_plot(seurat_object, TCR_dataframe) ball_pack_plot TCR_dataframe <- read.csv(\"file_location/all_contig_annotations.csv\") integrated_seurat_object <- integrate_tcr(seurat_object, TCR_dataframe)  # or simply modify the current seurat object seurat_object <- integrate_tcr(seurat_object, TCR_dataframe)  # The integrated seurat object can even be just passed to the clonal expansion plot without the TCR dataframe ball_pack_plot <- clonal_expansion_plot(seurat_object) ball_pack_plot"},{"path":"https://qile0317.github.io/scballpack/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"Visualization Of T-cell Clonal Expansion","text":"Comprehensive documentation changelog deployed https://qile0317.github.io/APackOfTheClones/","code":""},{"path":"https://qile0317.github.io/scballpack/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"Visualization Of T-cell Clonal Expansion","text":"APackOfTheClones currently incomplete, features, tests, bugfixes, documentation come. However, pull requests forked branches welcome mostly solo-project moment. major changes, please open issue first discuss like change. Please also make sure update tests appropriate. explanation algorithms eventually made publicly available either pre-print developer vignette.","code":""},{"path":"https://qile0317.github.io/scballpack/index.html","id":"contact","dir":"","previous_headings":"","what":"Contact","title":"Visualization Of T-cell Clonal Expansion","text":"Qile Yang - qile0317@gmail.com","code":""},{"path":"https://qile0317.github.io/scballpack/index.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Visualization Of T-cell Clonal Expansion","text":"[1] Ma, J., Tibbitt, C. ., Georén, S. K., Christian, M., Murrell, B., Cardell, L. O., Bachert, C., & Coquet, J. M. (2021). Single-cell analysis pinpoints distinct populations cytotoxic CD4+ T cells IL-10+CD109+ TH2 cell population nasal polyps. Science immunology, 6(62), eabg6356. https://doi.org/10.1126/sciimmunol.abg6356 [2] atakanekiz (2019) Tutorial:Integrating VDJ sequencing data Seurat. https://www.biostars.org/p/384640/","code":""},{"path":"https://qile0317.github.io/scballpack/index.html","id":"acknowledgements","dir":"","previous_headings":"","what":"Acknowledgements","title":"Visualization Of T-cell Clonal Expansion","text":"Thanks Ben Murrell (@murrelb) Karolinska Institute introducing idea giving suggestions.","code":""},{"path":"https://qile0317.github.io/scballpack/reference/APackOfTheClones-package.html","id":null,"dir":"Reference","previous_headings":"","what":"APackOfTheClones: Visualization Of T-cell Clonal Expansion — APackOfTheClones-package","title":"APackOfTheClones: Visualization Of T-cell Clonal Expansion — APackOfTheClones-package","text":"circle packing package visualizing T-cell clonal expansion integrating scRNAseq TCR library data.","code":""},{"path":[]},{"path":"https://qile0317.github.io/scballpack/reference/APackOfTheClones-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"APackOfTheClones: Visualization Of T-cell Clonal Expansion — APackOfTheClones-package","text":"Maintainer: Qile Yang qile0317@gmail.com [copyright holder]","code":""},{"path":"https://qile0317.github.io/scballpack/reference/clonal_expansion_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualize T cell clonal expansion with a ball-packing plot. — clonal_expansion_plot","title":"Visualize T cell clonal expansion with a ball-packing plot. — clonal_expansion_plot","text":"Integrates cell ranger T cell library Seurat object UMAP reduction. gets sizes unique clones utilizes circle-packing algorithm pack circles representing individual clones approximately UMAP coordinates clusters ggplot object.","code":""},{"path":"https://qile0317.github.io/scballpack/reference/clonal_expansion_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualize T cell clonal expansion with a ball-packing plot. — clonal_expansion_plot","text":"","code":"clonal_expansion_plot(   seurat_obj,   tcr_df = \"seurat_obj_already_integrated\",   res = 360,   clone_scale_factor = 0.01,   rad_scale_factor = 0.95,   ORDER = TRUE,   try_place = FALSE,   verbose = TRUE,   repulse = FALSE,   repulsion_threshold = 1,   repulsion_strength = 1,   max_repulsion_iter = 10,   use_default_theme = TRUE,   show_origin = FALSE,   retain_axis_scales = FALSE,   add_size_legend = TRUE,   legend_sizes = c(1, 5, 50),   legend_position = \"top_left\",   legend_buffer = 1.5,   legend_color = \"#808080\" )"},{"path":"https://qile0317.github.io/scballpack/reference/clonal_expansion_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualize T cell clonal expansion with a ball-packing plot. — clonal_expansion_plot","text":"seurat_obj Seurat object least UMAP reduction. Can either already integrated T cell library via `integrate_tcr(seurat_obj, tcr_df)`, case subsquent `tcr_df` argument can left empty. Else, object must regular seurat object T cell library must inputted following `tcr_df` argument tcr_df left empty, `seurat_obj` assumed already integrated. Otherwise, `data.frame` T cell library generated 10X genomics' Cell Ranger. dataframe least `barcode` `raw_clonotype_id` columns. res number points generated path per full circle. plot viewers, circles seem slightly pixelated, highly recommended first try export plot `.svg` increasing `res` clone_scale_factor numeric. Decides much scale circle. Usually kept around 0.01 somewhat maintain UMAP structure large datasets. However, plot displayed ever blank, first try increasing value. rad_scale_factor numeric. indicates much radii clones decrease add slight gap . Defaults 1 0.85-0.95 values recommended. `rad_scale_factor` `clone_scale_factor` may need repeatedly readjusted ORDER logical. Decides largest clones cluster centroids try_place `TRUE`, always minimizes distance newly placed circle origin verbose logical. Decides visual cues print REPL packing progress repulse `TRUE`, attempt push overlapping clusters away . repulsion_threshold numeric. radius cluster overlap acceptable repulsion_strength numeric. smaller value less clusters repulse max_repulsion_iter numeric. number repulsion iterations, note increasing value may occasionally even lead worse looking plots clusters may repulse eachother much use_default_theme `TRUE`, resulting plot theme seurat UMAP. Else, plot simply blank background show_origin logical. `TRUE`, centers circle plotted retain_axis_scales `TRUE`, approximately maintains axis scales original UMAP. However, attempt extend axes never shorten. add_size_legend `TRUE`, adds legend plot titled `\"Clone sizes\"` indicating relative sizes clones. legend_sizes numeric vector. Indicates circle sizes displayed legend defaults `c(1, 5, 10)`. legend_position character. Can set either `\"top_left\"`, `\"top_right\"`, `\"bottom_left\"`, `\"bottom_right\"` places legend roughly corresponding position legend_buffer numeric. Indicates much \"push\" legend towards center plot selected corner. negative, push away legend_color character. Indicates hex color circles displayed legend. Defaults hex code gray","code":""},{"path":"https://qile0317.github.io/scballpack/reference/clonal_expansion_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualize T cell clonal expansion with a ball-packing plot. — clonal_expansion_plot","text":"Returns ggplot2 object ball packing plot. Can operated like normal ggplot objects","code":""},{"path":[]},{"path":"https://qile0317.github.io/scballpack/reference/clonal_expansion_plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualize T cell clonal expansion with a ball-packing plot. — clonal_expansion_plot","text":"","code":"if (FALSE) { library(Seurat) library(readr) library(APackOfTheClones)  # run sc-RNAseq pipeline to produce a seurat_object  seurat_object <- RunUMAP(seurat_object) TCR_dataframe <- read.csv(\"file_location/all_contig_annotations.csv\")  # produce and show the ball-packing plot by integrating the data ball_pack_plot <- clonal_expansion_plot(seurat_object, TCR_dataframe) ball_pack_plot }"},{"path":"https://qile0317.github.io/scballpack/reference/count_clone_sizes.html","id":null,"dir":"Reference","previous_headings":"","what":"count the number of clonotype sizes per cell cluster in a seurat object integrated with a TCR library — count_clone_sizes","title":"count the number of clonotype sizes per cell cluster in a seurat object integrated with a TCR library — count_clone_sizes","text":"count number clonotype sizes per cell cluster seurat object integrated TCR library","code":""},{"path":"https://qile0317.github.io/scballpack/reference/count_clone_sizes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"count the number of clonotype sizes per cell cluster in a seurat object integrated with a TCR library — count_clone_sizes","text":"","code":"count_clone_sizes(integrated_seurat_obj)"},{"path":"https://qile0317.github.io/scballpack/reference/count_clone_sizes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"count the number of clonotype sizes per cell cluster in a seurat object integrated with a TCR library — count_clone_sizes","text":"integrated_seurat_obj Seurat object integrated T-cell receptor library integrate_tcr. specifically, metadata, must least elements `seurat_clusters` `raw_clonotype_id`","code":""},{"path":"https://qile0317.github.io/scballpack/reference/count_clone_sizes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"count the number of clonotype sizes per cell cluster in a seurat object integrated with a TCR library — count_clone_sizes","text":"Returns list `table` objects, element tabled clonotype frequencies seurat cluster corresponding index - 1. example, 5th element tabled frequency counts corresponds 4th seurat cluster (seurat clusters 0-indexed). element `NULL`, indicates corresponding T-cell receptor barcode cells cluster.","code":""},{"path":[]},{"path":"https://qile0317.github.io/scballpack/reference/count_clone_sizes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"count the number of clonotype sizes per cell cluster in a seurat object integrated with a TCR library — count_clone_sizes","text":"","code":"if (FALSE) { library(Seurat) library(APackOfTheClones)  # produce an integrated seurat_object seurat_object <- integrate_tcr(seurat_obj, tcr_dataframe) clonotype_counts <- count_clone_sizes(seurat_obj) }"},{"path":"https://qile0317.github.io/scballpack/reference/integrate_tcr.html","id":null,"dir":"Reference","previous_headings":"","what":"Integrate a TCR library into Seurat object metadata — integrate_tcr","title":"Integrate a TCR library into Seurat object metadata — integrate_tcr","text":"Modifies seurat object's metadata taking columns `all_contig_annotations.csv`, adding new elements `seurat_obj@meta.data`,  corresponding cells' barcodes handling duplicates (since sequencing TRA TRB genes creates multiple data points cell).","code":""},{"path":"https://qile0317.github.io/scballpack/reference/integrate_tcr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Integrate a TCR library into Seurat object metadata — integrate_tcr","text":"","code":"integrate_tcr(seurat_obj, tcr_file, verbose = TRUE)"},{"path":"https://qile0317.github.io/scballpack/reference/integrate_tcr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Integrate a TCR library into Seurat object metadata — integrate_tcr","text":"seurat_obj Seurat object tcr_file `data.frame` T cell library generated Cell Ranger. important row cell barcodes strictly named `\"barcode\"`, deafult name barcodes 10X's `all_contig_annotations.csv` file. verbose `TRUE`, display progress bar R console.","code":""},{"path":"https://qile0317.github.io/scballpack/reference/integrate_tcr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Integrate a TCR library into Seurat object metadata — integrate_tcr","text":"Returns new Seurat object new elements metadata","code":""},{"path":"https://qile0317.github.io/scballpack/reference/integrate_tcr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Integrate a TCR library into Seurat object metadata — integrate_tcr","text":"Columns cells (barcodes) duplicates another row concatenated strings, seperated `__` metadata element. Barcodes TCR library matches barcodes `seurat_obj` add `NA`s elements index.","code":""},{"path":"https://qile0317.github.io/scballpack/reference/integrate_tcr.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Integrate a TCR library into Seurat object metadata — integrate_tcr","text":"atakanekiz (2019) Tutorial:Integrating VDJ sequencing data Seurat. https://www.biostars.org/p/384640/","code":""},{"path":"https://qile0317.github.io/scballpack/reference/integrate_tcr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Integrate a TCR library into Seurat object metadata — integrate_tcr","text":"","code":"if (FALSE) { library(Seurat) library(readr) library(APackOfTheClones)  # run sc-RNAseq pipeline to produce a seurat_object  # read in the TCR data TCR_dataframe <- read.csv(\"file_location/all_contig_annotations.csv\")  # integrate the TCR data into new seurat object integrated_seurat_object <- integrate_tcr(seurat_object, TCR_dataframe)  # or simply modify the current seurat object seurat_object <- integrate_tcr(seurat_object, TCR_dataframe) }"},{"path":"https://qile0317.github.io/scballpack/news/index.html","id":"apackoftheclones-010","dir":"Changelog","previous_headings":"","what":"APackOfTheClones 0.1.0","title":"APackOfTheClones 0.1.0","text":"Initial semi-stable release. main functions package working default parameters. package currently exports three functions: * integrate_tcr * count_clone_sizes * clonal_expansion_plot documentation, including documentation site. Currently, Automated cluster repulsion uses highly flawed mathematical formula loosely based force directed graph drawing techniques, resulting plots presentable function disabled temporarily Upcoming features/plans : * Customizable cluster coloration, just based original Seurat/ggplot palette * User-controlled cluster shifting * Comprehensive cluster repulsion * better legends optional legend border * automated optimization initial parameters clonal_expansion_plot, especially clone_scale_factor * BCR library integration * User vignette * Developer vignette * Submission CRAN Bioconductor * Rewrite certain circle packing functions rust improve performance","code":""}]
