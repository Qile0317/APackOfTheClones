<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>overlay a clone size legend on an APackOfTheClones plot — overlayLegend • APackOfTheClones</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="overlay a clone size legend on an APackOfTheClones plot — overlayLegend"><meta name="description" content="
This function has most of the parameters related to legend in
APOTCPlot(), and can plot a new / override the current legend.
However, it is very important that the input plot to the function
is a plot generated solely by APOTCPlot() or vizAPOTC() due to it
being a custom ggplot object. It will not override or erase any
additional layers that the user/other functions have added. To just
remove the legend, see removeLegend."><meta property="og:description" content="
This function has most of the parameters related to legend in
APOTCPlot(), and can plot a new / override the current legend.
However, it is very important that the input plot to the function
is a plot generated solely by APOTCPlot() or vizAPOTC() due to it
being a custom ggplot object. It will not override or erase any
additional layers that the user/other functions have added. To just
remove the legend, see removeLegend."><meta property="og:image" content="https://qile0317.github.io/APackOfTheClones/logo.png"><meta name="robots" content="noindex"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-TSDH5XEN3S"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TSDH5XEN3S');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">APackOfTheClones</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/APackOfTheClones-install.html">Install</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/APackOfTheClones.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/APackOfTheClones-runs.html">Storing and Fine-Tuning APackOfTheClones Runs</a></li>
    <li><a class="dropdown-item" href="../articles/APackOfTheClones-shared.html">Working With Clonotypes Shared Across Clusters</a></li>
    <li><a class="dropdown-item" href="../articles/APackOfTheClones-utils.html">Clonal Analysis Utilities in APackOfTheClones</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-archive" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Archive</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-archive"><li><a class="dropdown-item" href="../articles/archive/v0-main.html">v0.1.x main vignette</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Qile0317/APackOfTheClones/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>overlay a clone size legend on an APackOfTheClones plot</h1>
      <small class="dont-index">Source: <a href="https://github.com/Qile0317/APackOfTheClones/blob/unstable/R/insert_legend.R" class="external-link"><code>R/insert_legend.R</code></a></small>
      <div class="d-none name"><code>overlayLegend.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>This function has most of the parameters related to legend in
<code><a href="APOTCPlot.html">APOTCPlot()</a></code>, and can plot a new / override the current legend.
However, it is very important that the input plot to the function
is a plot generated solely by <code><a href="APOTCPlot.html">APOTCPlot()</a></code> or <code><a href="vizAPOTC.html">vizAPOTC()</a></code> due to it
being a custom ggplot object. It will not override or erase any
additional layers that the user/other functions have added. To just
remove the legend, see <a href="removeLegend.html">removeLegend</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">overlayLegend</span><span class="op">(</span></span>
<span>  <span class="va">apotc_ggplot</span>,</span>
<span>  legend_sizes <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  legend_position <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  legend_buffer <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  legend_color <span class="op">=</span> <span class="st">"#808080"</span>,</span>
<span>  legend_spacing <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  legend_label <span class="op">=</span> <span class="st">"Clone sizes"</span>,</span>
<span>  legend_text_size <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  add_legend_background <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_legend_centerspace <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  linetype <span class="op">=</span> <span class="st">"blank"</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">360L</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-apotc-ggplot">apotc_ggplot<a class="anchor" aria-label="anchor" href="#arg-apotc-ggplot"></a></dt>
<dd><p>a ggplot object that is the output of <code><a href="APOTCPlot.html">APOTCPlot()</a></code> or
<code><a href="vizAPOTC.html">vizAPOTC()</a></code></p></dd>


<dt id="arg-legend-sizes">legend_sizes<a class="anchor" aria-label="anchor" href="#arg-legend-sizes"></a></dt>
<dd><p>numeric vector. Indicates the circle sizes to be
displayed on the legend, and will always be sorted from smallest to greatest.
Defaults to <code>"auto"</code> which estimate a reasonable range of sizes to display.</p></dd>


<dt id="arg-legend-position">legend_position<a class="anchor" aria-label="anchor" href="#arg-legend-position"></a></dt>
<dd><p>character or numeric. Can be set to either
<code>"top_left"</code>, <code>"top_right"</code>, <code>"bottom_left"</code>, <code>"bottom_right"</code> and places the
legend roughly in the corresponding position. Otherwise, can be a numeric
vector of length 2 indicating the x and y position of the <em>topmost (smallest)
circle</em> of the legend.</p></dd>


<dt id="arg-legend-buffer">legend_buffer<a class="anchor" aria-label="anchor" href="#arg-legend-buffer"></a></dt>
<dd><p>numeric. Indicates how much to "push" the legend towards
the center of the plot from the selected corner. If negative, will push away</p></dd>


<dt id="arg-legend-color">legend_color<a class="anchor" aria-label="anchor" href="#arg-legend-color"></a></dt>
<dd><p>character. Indicates the hex color of the circles
displayed on the legend. Defaults to the hex code for a gray tone</p></dd>


<dt id="arg-legend-spacing">legend_spacing<a class="anchor" aria-label="anchor" href="#arg-legend-spacing"></a></dt>
<dd><p>numeric. Indicates the horizontal distance between each
stacked circle on the size legend. Defaults to <code>"auto"</code> which will use an
estimated value depending on plot size</p></dd>


<dt id="arg-legend-label">legend_label<a class="anchor" aria-label="anchor" href="#arg-legend-label"></a></dt>
<dd><p>character. The title of the legend, which defaults to
<code>"clone sizes</code>.</p></dd>


<dt id="arg-legend-text-size">legend_text_size<a class="anchor" aria-label="anchor" href="#arg-legend-text-size"></a></dt>
<dd><p>numeric. The text size of the letters and numbers on
the legend</p></dd>


<dt id="arg-add-legend-background">add_legend_background<a class="anchor" aria-label="anchor" href="#arg-add-legend-background"></a></dt>
<dd><p>logical. If <code>TRUE</code>, will add a border around the
legend and fill the background to be white, overlaying anything else.</p></dd>


<dt id="arg-add-legend-centerspace">add_legend_centerspace<a class="anchor" aria-label="anchor" href="#arg-add-legend-centerspace"></a></dt>
<dd><p>numeric. An additional amount of distance
changed between the circle sizes on the left side of the legend and the
numbers on the right. Useful to set to around 0.5 (or more / less) when there
are particularly large clone sizes that may cover the numbers.</p></dd>


<dt id="arg-linetype">linetype<a class="anchor" aria-label="anchor" href="#arg-linetype"></a></dt>
<dd><p>The type of outline each circle should have. defaults to
<code>"blank</code> meaning no outline. More information is in the function
documentation of <code><a href="https://ggforce.data-imaginist.com/reference/geom_circle.html" class="external-link">ggforce::geom_circle</a></code>.</p></dd>


<dt id="arg-res">res<a class="anchor" aria-label="anchor" href="#arg-res"></a></dt>
<dd><p>The number of points on the generated path per full circle. From
plot viewers, if circles seem slightly too pixelated, it is recommended to
first try to export the plot as an <code>.svg</code> before increasing <code>res</code> due to
increased plotting times from <a href="https://ggforce.data-imaginist.com/reference/geom_circle.html" class="external-link">ggforce::geom_circle</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggplot object of the APackOfTheClones clonal expansion plot of the
seurat object. There is an additional 10th element in the object named
<code>"APackOfTheClones"</code> used by other functions in this package and shouldn't
interfere with any other ggplot functionality. (As far as currently known)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The size legend on APackOfTheClones plots are simply a collection of
annotation layers of the <code>rect</code>, <code>text</code>, <code>circle</code> geoms. Therefore it
isn't quite a ggplot legend. In the actual ggplot object, the <code>$layers</code>
element should all be named with an empty character <code>""</code>, and those
that comprise the annotation layers of the legend should be named whatever
<code>APackOfTheClones:::.ApotcLegendLayerName</code> is. Note that this is simply
an implementation detail that the user should not interfere with.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="removeLegend.html">removeLegend</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create a plot with a legend</span></span></span>
<span class="r-in"><span><span class="va">apotc_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="vizAPOTC.html">vizAPOTC</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"combined_pbmc"</span><span class="op">)</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># reposition the legend to top right</span></span></span>
<span class="r-in"><span><span class="fu">overlayLegend</span><span class="op">(</span><span class="va">apotc_plot</span>, legend_position <span class="op">=</span> <span class="st">"top right"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="overlayLegend-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use different sizes and label - may be nice to use the pipe</span></span></span>
<span class="r-in"><span><span class="va">apotc_plot</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">overlayLegend</span><span class="op">(</span></span></span>
<span class="r-in"><span>    legend_sizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    legend_label <span class="op">=</span> <span class="st">"odd sizes"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="overlayLegend-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Qile Yang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

