<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • APackOfTheClones</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://qile0317.github.io/APackOfTheClones/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-TSDH5XEN3S"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TSDH5XEN3S');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">APackOfTheClones</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/APackOfTheClones-install.html">Install</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/APackOfTheClones.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/APackOfTheClones-runs.html">Storing and Fine-Tuning APackOfTheClones Runs</a></li>
    <li><a class="dropdown-item" href="../articles/APackOfTheClones-shared.html">Working With Clonotypes Shared Across Clusters</a></li>
    <li><a class="dropdown-item" href="../articles/APackOfTheClones-utils.html">Clonal Analysis Utilities in APackOfTheClones</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-archive" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Archive</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-archive"><li><a class="dropdown-item" href="../articles/archive/v0-main.html">v0.1.x main vignette</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Qile0317/APackOfTheClones/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/Qile0317/APackOfTheClones/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.1" id="apackoftheclones-121">APackOfTheClones 1.2.1<a class="anchor" aria-label="anchor" href="#apackoftheclones-121"></a></h2><p class="text-muted">CRAN release: 2024-10-10</p>
<div class="section level3">
<h3 id="additions-1-2-1">Additions<a class="anchor" aria-label="anchor" href="#additions-1-2-1"></a></h3>
<ul><li>Add code of conduct and contributing guidelines in the package source code.</li>
<li>Add <code>assertthat</code> in imports.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-1-2-1">Changes<a class="anchor" aria-label="anchor" href="#changes-1-2-1"></a></h3>
<ul><li>The main change in this patch is a minor alteration in the circle packing algorithm that should result in packings acting slightly more consistent across different physical systems. This may result in slightly different circle placements in the clonal expansion plot, but the overall structure should remain the same. This is pretty much only noticeable in the case of extremely small testing datasets, which is why this is a patch version. However, it is very possible that the same seurat object will produce a slightly different packing than before.</li>
<li>updated citation information upon calling <code>citation("APackOfTheClones")</code>: the package as of this patch version is undergoing review in the <a href="https://joss.theoj.org/papers/eb9d2b2fc3ffb1d440bd7120b66f1f71" class="external-link">journal of open source software</a>.</li>
<li>Updated the <code>combined_pbmc</code> dataset to be up-to-date with the latest version of <code>Seurat</code>.</li>
<li>Spelling &amp; minor fixes / updates to various functions, documentation.</li>
<li>Removed package startup deprecation message for returning users of version <code>0.1.x</code>.</li>
<li>Removed the explicit <code>magrittr</code> dependency.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.0" id="apackoftheclones-120">APackOfTheClones 1.2.0<a class="anchor" aria-label="anchor" href="#apackoftheclones-120"></a></h2><p class="text-muted">CRAN release: 2024-04-16</p>
<div class="section level3">
<h3 id="additions-1-2-0">Additions<a class="anchor" aria-label="anchor" href="#additions-1-2-0"></a></h3>
<ul><li>Functionality around defining “clusters”/“Idents” has been revamped but backwards compatible. Added argument <code>alt_ident</code> in many functions including <code>vizAPOTC</code> and <code>RunAPOTC</code> to allow for counting clusters based on different cell identities or the current active identity if <code>NULL</code>, and it is now part of the subsetting arguments for all functions that work with APackOfTheClones runs /data. This includes:
<ul><li><code>vizAPOTC</code></li>
<li><code>RunAPOTC</code></li>
<li><code>getSharedClones</code></li>
<li>
<code>countCloneSizes</code> (see section below in changes to incorporate identity functionality)</li>
<li>updated relevant vignettes to reflect the new argument.</li>
</ul></li>
<li>Add <code>renameApotcRun</code> to rename APackOfTheClones runs.</li>
<li>Add argument <code>detail</code> in <code>APOTCPlot</code> and <code>vizAPOTC</code> to allow user to quickly plot a version of the clonal expansion plot where each cluster is just one large circle. Correspondingly added a subsection in <code><a href="../articles/APackOfTheClones-shared.html">vignette("APackOfTheClones-shared")</a></code>.</li>
<li>Add argument <code>publicity</code> in <code>getSharedClones</code> to filter the output shared clones by the number of clusters each clonotype is present in.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-1-2-0">Changes<a class="anchor" aria-label="anchor" href="#changes-1-2-0"></a></h3>
<ul><li>
<code>vizAPOTC</code> and <code>RunAPOTC</code> now defaults to aggregating clustered clonotype frequencies based on active ident of the seurat object. Additionally, if using an ident where its levels are not ordered integers, then the cluster labels for each APackOfTheClones run that is stored in the seurat object will no longer just be “C1”, “C2”, … and will be the names of the idents.</li>
<li>Fixed the output for arguments <code>intop</code> and <code>intop_per_cl</code> in <code>getSharedClones</code> so they actually filters for all clones with clone sizes in the top range.</li>
<li>All arguments in <code>AdjustAPOTC</code> that asks for cluster indices as input now also accept characters representing their respective labels in the APackOfTheClones runs.</li>
<li>The argument <code>recolor_indicies</code> has been renamed to <code>recolor_indices</code> in <code>AdjustAPOTC</code>.</li>
<li>
<code>countCloneSizes</code> now outputs a named list with each name being the cluster identity. Additionally, the argument <code>by_cluster</code> can now also take in single characters as arguments representing possible alternative cluster identities in the metadata.</li>
<li>Removed <code>mini_seurat_obj</code> from publicly exported data.</li>
<li>Several exported functions, including <code>AdjustAPOTC</code>, now have stricter argument checking of type and length.</li>
<li>Package can now be installed again on releases with C++14 compilation on older releases of R.</li>
<li>The minimum required R version has been bumped from <code>4.0.0</code> to <code>4.1.0</code>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="apackoftheclones-110">APackOfTheClones 1.1.0<a class="anchor" aria-label="anchor" href="#apackoftheclones-110"></a></h2><p class="text-muted">CRAN release: 2024-04-05</p>
<div class="section level3">
<h3 id="additions-1-1-0">Additions<a class="anchor" aria-label="anchor" href="#additions-1-1-0"></a></h3>
<ul><li>Add <code>getSharedClones</code> to compute information about clonotypes that are present in multiple seurat clusters and return it to the user.</li>
<li>Add <code>showCloneHighlight</code> to extend the scRepertoire analogue for an APackOfTheClones plot - comes with many options to have certain clones appear differently on an existing plot.</li>
<li>Add <code>overlayLegend</code> to overlay/modify current legend on a clonal expansion plot.</li>
<li>Add <code>removeLegend</code> to remove any existing legend on a clonal expansion plot.</li>
<li>Add <code>mergeCloneSizes</code> to merge clustered raw clone sizes into one table.</li>
<li>Added arguments in <code>countCloneSizes</code> to optionally NOT get clones sizes by cluster, and to optionally sort the output.</li>
<li>Added argument <code>add_legend_centerspace</code> in <code>APOTCPlot</code> and <code>vizAPOTC</code> to adjust spacing between guide circles and their values, for cases where guide circles have an exceedingly large radius.</li>
<li>Added arguments in <code>AdjustAPOTC</code> to work with labels and their locations</li>
<li>Added argument <code>verbose</code> in <code>APOTCPlot</code> to display some additional visual cues.</li>
<li>Added argument <code>alpha</code> in <code>APOTCPlot</code> and <code>vizAPOTC</code> to change the alpha (transparency) of each circle.</li>
<li>Added arguments in <code>APOTCPlot</code> and the corresponding <code>vizAPOTC</code> to compute and plot “links” between clonotypes that are “shared” i.e. common within multiple clusters. Currently, only supports plotting of straight lines.</li>
<li>Add <code><a href="../articles/APackOfTheClones-install.html">vignette("APackOfTheClones-install")</a></code> for detailed installation instructions.</li>
<li>Add <code><a href="../articles/APackOfTheClones-utils.html">vignette("APackOfTheClones-utils")</a></code> for more guidance on the various utilities of the package.</li>
<li>Add <code><a href="../articles/APackOfTheClones-shared.html">vignette("APackOfTheClones-shared")</a></code> for guidance on working with and visualizing clonotypes shared among different seurat clusters.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-1-1-0">Changes<a class="anchor" aria-label="anchor" href="#changes-1-1-0"></a></h3>
<ul><li>
<code>countCloneSizes</code>
<ul><li>Fixed the output to truly be a list of unnamed “table” objects, whereas before, for the clusters with valid clones, each element was instead a list with the first and only element being the tabled clone sizes, and they also had a dimname of <code>"x"</code>.</li>
<li>Fixed a bug where if the seurat object had no actual clones, the function would error instead of returning a list of empty tables.</li>
<li>These fixed changed the raw clone size objects stored in <code>ApotcData</code> objects, so all objects and pipelines used before this <em>must</em> be re-ran to be forwards compatible! This is technically a breaking change but the major version was not incremented since the fix should be relatively trivial.</li>
</ul></li>
<li>For <code>vizAPOTC</code>, <code>RunAPOTC</code>, <code>APOTCPlot</code>, fixed the subsetting arguments <code>...</code> and <code>extra_filter</code> for cases where setting certain columns to only one level will erase extra data.</li>
<li>Altered the ggplot object outputs of <code>APOTCPlot</code> and <code>vizAPOTC</code> to work with <code>overlayLegend</code> and <code>removeLegend</code> by introducing another element with a smaller size <code>ApotcData</code> object, and layers are now either named with an empty string or a layer label. Leftover ggplot objects from previous versions will have to be updated by re-running that command (<code>APOTCPlot</code>/<code>vizAPOTC</code>) that generated them.</li>
<li>Fixed the functionality of the <code>new_clone_scale_factor</code> argument in <code>AdjustAPOTC</code> to guarantee it is a true rescaling of the clone scale factor, and the internally estimated cluster radii will correspondingly be modified to work with potential repulsion.</li>
<li>Circles on legends of clonal expansion plots will now have the same linetype as the rest of the circles in a plot generated by <code>APOTCPlot</code>/<code>vizAPOTC</code>, whereas before they were forced to be blank.</li>
<li>Legend background is now a single <code>geom_rect</code> annotation with a black border instead of a white rectangle stacked on top of a black rectangle.</li>
<li>Many fixes to the behavior of <code>AdjustAPOTC</code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="apackoftheclones-100">APackOfTheClones 1.0.0<a class="anchor" aria-label="anchor" href="#apackoftheclones-100"></a></h2><p class="text-muted">CRAN release: 2024-01-13</p>
<div class="section level3">
<h3 id="additions-1-0-0">Additions<a class="anchor" aria-label="anchor" href="#additions-1-0-0"></a></h3>
<ul><li>Add <code>vizAPOTC</code> to replace <code>clonal_expansion_plot</code> with some similar arguments but works completely differently with an additional set of argument requirements, to ultimately produce a similar but better visualization.</li>
<li>Add <code>RunAPOTC</code> to store multiple APackOfTheClones runs on the seurat object.</li>
<li>Add <code>containsApotcRun</code> to check for the existence of some run based on an ID.</li>
<li>Add <code>getApotcDataIds</code> to get all APackOfTheClones run IDs.</li>
<li>Add <code>getLastApotcDataId</code> to get the latest APackOfTheClones run ID.</li>
<li>Add <code>deleteApotcData</code> to delete all data associate with some APackOfTheClones run.</li>
<li>Add <code>APOTCPlot</code> to plot APackOfTheClones run results into a ggplot.</li>
<li>Add <code>AdjustAPOTC</code> to modify certain attributes of prior APackOfTheClones runs.</li>
<li>Add <code>countCloneSizes</code> as a convenience function to count clonotype sizes based on the clonecall and allows subsetting of the seurat metadata</li>
<li>Add <code>getReductionCentroids</code> as a convenience function to get the physical centroids of each cell in some reduction in a seurat object.</li>
<li>Added two new vignettes are on the <code>pkgdown</code> website and indexed, and should be viewed in order of <code><a href="../articles/APackOfTheClones.html">vignette("APackOfTheClones")</a></code> and <code><a href="../articles/APackOfTheClones-runs.html">vignette("APackOfTheClones-runs")</a></code>.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-1-0-0">Changes<a class="anchor" aria-label="anchor" href="#changes-1-0-0"></a></h3>
<ul><li>
<strong><em>ALL v0.1.x functions are deprecated/defunct</em></strong>, and the clonal expansion workflow has changed.</li>
<li>The latest version two of <code>scRepertoire</code> is now a “dependency”, and the package is now structured as an extension of <code>scRepertoire</code> when it comes to integrating VDJ data, as <code>scRepertoire</code> already possesses a mature and common method to do so.</li>
<li>Package startup message has been modified to notify users about the deprecation and breaking changes.</li>
<li>All clonal expansion plots will no longer have a title for the default theme</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.4" id="apackoftheclones-014-github-release">APackOfTheClones 0.1.4 (github release)<a class="anchor" aria-label="anchor" href="#apackoftheclones-014-github-release"></a></h2>
<div class="section level3">
<h3 id="additions-0-1-4">Additions<a class="anchor" aria-label="anchor" href="#additions-0-1-4"></a></h3>
<ul><li>The clonal expansion plotting function now has a new optional argument <code>reduction</code> which now allows the user to choose which reduction the circle clonal clusters should be based on. Defaults to <code>'umap'</code> but can now be changed to <code>'tsne'</code> or <code>'pca'</code> given that they have been ran already on the seurat object. The vignette has been updated accordingly as well</li>
<li>New CRAN badge showing date of latest release on <code>README.md</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="changes-0-1-4">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-4"></a></h3>
<ul><li>Some testcases have been altered/fixed to pass CRAN’s R-CMD check</li>
<li>Package startup message has been improved</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.3" id="apackoftheclones-013">APackOfTheClones 0.1.3<a class="anchor" aria-label="anchor" href="#apackoftheclones-013"></a></h2><p class="text-muted">CRAN release: 2023-07-16</p>
<div class="section level3">
<h3 id="additions-0-1-3">Additions<a class="anchor" aria-label="anchor" href="#additions-0-1-3"></a></h3>
<ul><li>
<code>clonal_expansion_plot</code> now displays time elapsed if <code>verbose = TRUE</code>
</li>
<li>There are now package startup messages</li>
</ul></div>
<div class="section level3">
<h3 id="changes-0-1-3">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-3"></a></h3>
<ul><li>Many functions have been rewritten in C++, improving the circle packing runtime of <code>clonal_expansion_plot</code> 70 ~ 140 fold. For reference, for a dataset with around 2500 viable T cells, the runtime averages 0.1s</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="apackoftheclones-012">APackOfTheClones 0.1.2<a class="anchor" aria-label="anchor" href="#apackoftheclones-012"></a></h2><p class="text-muted">CRAN release: 2023-05-09</p>
<div class="section level3">
<h3 id="additions-0-1-2">Additions<a class="anchor" aria-label="anchor" href="#additions-0-1-2"></a></h3>
<ul><li>Two new datasets previously in the test folder have now moved to <code>\data</code> and are available to users and can be called via <code>data("mini_seurat_obj")</code> and <code>data("mini_clonotype_data")</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-0-1-2">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-2"></a></h3>
<ul><li>Released package to CRAN.</li>
<li>Minor documentation changes to adhere to CRAN standards.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="apackoftheclones-011-github-release">APackOfTheClones 0.1.1 (github release)<a class="anchor" aria-label="anchor" href="#apackoftheclones-011-github-release"></a></h2>
<div class="section level3">
<h3 id="additions-0-1-1">Additions<a class="anchor" aria-label="anchor" href="#additions-0-1-1"></a></h3>
<ul><li>A preliminary user vignette can be viewed on the documentation website, but not locally.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-0-1-1">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-1"></a></h3>
<ul><li>An initial version of automated cluster repulsion is correctly implemented and the related arguments in <code>clonal_expansion_plot</code> has been “unlocked”.</li>
<li>Size legends are now correctly implemented, and the related arguments have also been “unlocked” in <code>clonal_expansion_plot</code>.</li>
<li>Function documentation and the README in general has been slightly improved. (automatically updated on the pkgdown website)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="apackoftheclones-010-github-release">APackOfTheClones 0.1.0 (github release)<a class="anchor" aria-label="anchor" href="#apackoftheclones-010-github-release"></a></h2>
<p>Initial semi-stable release. The main functions of the package are working with their default parameters. The package currently exports three functions:</p>
<ul><li><code>integrate_tcr</code></li>
<li><code>count_clone_sizes</code></li>
<li><code>clonal_expansion_plot</code></li>
</ul><p>All of which have documentation, including on the documentation site.</p>
<p>Currently, Automated cluster repulsion uses a highly flawed mathematical formula loosely based on force directed graph drawing techniques, the resulting plots are not presentable and the function has been disabled temporarily</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Qile Yang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

